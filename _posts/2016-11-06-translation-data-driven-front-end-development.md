---
layout: post
title: "[博客翻译] 基于数据驱动的前端开发"
description: "中文翻译"
category:
tags: data-driven front-end-development chinese-translation
---
{% include JB/setup %}

## 基于数据驱动的前端开发

原文链接: [Data-driven front-end development](https://www.redweb.com/agency/blog/2013/january/data-driven-front-end-development)

作者: 高级前端工程师Luke Guppy，2013年1月7日

互联网的存在就是消耗数据，让每个人尽可能的提高和找到信息。人类在获取数据，理解数据和与数据互动的方式上，在逐渐改变，与此同时，每个人对最新的数据和相关的数据的期望也在发生改变。

现在所有人都期望爆炸性新闻即时出现在多个不同额度网站或者手机应用中。我们会期望和同一个网络圈子的朋友共享每一条即时内容(留言，点赞或者分享)的互动。每日产出的应用都需要拥有这些用户期望的(即时性)功能。在充满着竞争的大环境中，一旦你的应用出现瑕疵，用户会毫不犹豫的离开。

当然这也不是新鲜事了。这些功能也早就存在在Web应用中，只是现存唯一的解决方案，是对通过服务器端的数据和逻辑的严重依赖。

### 怎样处理数据

<figure>
    <img src="http://www.redweb.com/sites/default/files/diagram1.jpg" style="max-width: 500px;margin: auto;"/>
</figure>

当网页格式的请求到达服务器，服务器中相关逻辑会对请求进行处理(例如，下单或者对数据集进行过滤)，接着，数据以页面内容的形式返回到前端。这样的做法有个问题，如果想要改变刚刚被渲染成页面内容的数据，那么前面说到的的请求会被再次发送，页面也会在浏览器中重新加载。

<figure>
    <img src="https://www.redweb.com/sites/default/files/diagram2.jpg" style="max-width: 500px;margin: auto;"/>
</figure>

通用的替代方法是，在页面初始加载完成后，使用Javascript在对应的用户行为上，对页面进行操作。这种方式需要所有的数据预先在页面上被渲染完成，接着Javascript可以显示和隐藏不同的数据元素，例如内容项目列表显示，点击其中一个项目，该项目的详情内容立即显示，无需重新加载页面。

这种方式的好处是，所有的逻辑都在客户端的浏览器中，所以看上去是瞬间发生的。没有页面被重新加载，可是，这种方式只适用于页面上渲染的数据，因为Javascript只可以对已渲染的数据进行操作。对于使用大量数据的单页应用SPA，这样做只会加重页面初始加载的负担。更严重的是，使用Javascript来获取网页内的DOM元素中的数据，很容易编写不易维护的Javascript代码，浏览器也会花费大量的时间在Javescript代码处理上。

类似jQuery和Dojo库使得这种操作变得简易很多，但是显而易见，这不是一个有效的途径来解决上面提出的问题。

### 如何处理数据

<figure>
    <img src="https://www.redweb.com/sites/default/files/diagram3.jpg" style="max-width: 500px;margin: auto;"/>
</figure>

有没有更有效的办法呢？答案是从网页中抽离数据，让它自己渲染。对服务器的一次初始页面请求(通常情况下是页面生命周期中最多的一次数据加载)，只能请求返回必需的页面元素，而非以获取数据为主的请求。这样做使得初始加载更快。

接着，数据可以通过Javascript AJAX请求获取，服务器返回的数据可以使用Javascript格式(一般为JSON数据结构)封装。只要数据获取步骤完成，依赖这些数据相应的页面元素会被渲染。这个数据被Javascript所引用，用户交互行为会改变这个数据，也同时改变页面上对应的元素。

上面说的这种方式更有效的主要原因为: Javascript不需要再从网页中查询获取要被修改的DOM元素。另外，对服务器端的AJAX请求可以分割为多个请求后，只有在用户交互发生时，相应的请求才被调用。

补充一点，用户更新数据的动作通过AJAX POST方法发送到服务器。这意味着用户的交互行为改变的数据，会对其他用户的交互有效，或者为下一次使用网站保存当前数据状态。

类似KnockoutJS和BackboneJS这些Javascript框架可以简化这种方法。KnockoutJS的映射插件专门为Web应用处理复杂的JSON数据。

这种方法需要开发者在实际编码之前做更多的准备。开发团队需要考虑周全，制订详细的数据结构，这种做法是为了处理所有需要(数据)的功能，并且服务器端为这些功能提供一系列对应的Web服务(例如，API)。开发者需要编写模块化的Javascript代码，才能让数据集和依赖该数据集的函数二者合并，重用，并且可以支持其他各种功能。

### 什么时候使用

不是所有的网站都是大量的数据驱动类型，但是用户的期望日益增加，这带来对更加复杂的Web应用的需求也在增加。任何使用页面加载来渲染的类似单页应用的网页的项目，都最好做成单页应用。现今手机，电脑和浏览器技术的发展迅猛，以至于让我们越来越高效的使用前端技术去处理大量的数据驱动逻辑，同时这些技术允许我们构建一些真正伟大的Web应用。

### 作者简介

Luke Guppy，高级前端工程师

我的主要工作是前端网站和数字应用视觉设计。我热衷于使用不同的技术完成新奇创意的项目。若不是在构造优美的图片或者在黑暗的房间中写代码，那你肯定可以发现我在上高尔夫课程或者陪伴我的家人。

全文完。
翻译不妥之处，请见谅，如果有空来函指正，将感激不尽！